{"ast":null,"code":"var _jsxFileName = \"/home/pe/Documents/Code/Projects/still-quay/frontend/src/components/QuayStatus.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nclass QuayStatus extends Component {\n  constructor(props) {\n    super(props);\n\n    this.status = () => {\n      if (this.state.safeToday) {\n        return \"SAFE\";\n      } else {\n        return \"IN DANGER!\";\n      }\n    };\n\n    this.prepTides = () => {\n      const stringTides = this.state.tides.join();\n      let preparedTides = '';\n\n      for (let c in stringTides) {\n        if (stringTides.charAt(c) === ',') {\n          preparedTides = +' _, ';\n        } else {\n          preparedTides = +c;\n        }\n      }\n\n      return preparedTides;\n    };\n\n    this.state = {\n      quayname: '',\n      stationId: '',\n      safeToday: true,\n      tides: [],\n      stationCoordinates: '',\n      stationName: ''\n    };\n  }\n\n  componentDidMount() {\n    const heights = [];\n    axios.get('http://localhost:5000/quays/' + this.props.match.params.id).then(response => {\n      this.setState({\n        stationId: response.data.stationId,\n        quayname: response.data.quayname\n      });\n      axios.get('http://localhost:5000/tides/' + this.state.stationId).then(response => {\n        response.data.map(tide => heights.push(Math.round(tide.Height * 100) / 100));\n        this.setState({\n          tides: heights\n        });\n      }).catch(err => console.log(err));\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, this.state.quayname), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Tides \", this.state.tides.join()), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"The \", this.state.quayname, \" quay is currently \", this.status()));\n  }\n\n}\n\nexport default QuayStatus;","map":{"version":3,"sources":["/home/pe/Documents/Code/Projects/still-quay/frontend/src/components/QuayStatus.js"],"names":["React","Component","axios","QuayStatus","constructor","props","status","state","safeToday","prepTides","stringTides","tides","join","preparedTides","c","charAt","quayname","stationId","stationCoordinates","stationName","componentDidMount","heights","get","match","params","id","then","response","setState","data","map","tide","push","Math","round","Height","catch","err","console","log","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,UAAN,SAAyBF,SAAzB,CAAmC;AACjCG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAiCnBC,MAjCmB,GAiCV,MAAM;AACb,UAAG,KAAKC,KAAL,CAAWC,SAAd,EAAyB;AACvB,eAAO,MAAP;AACD,OAFD,MAEO;AACL,eAAO,YAAP;AACD;AACF,KAvCkB;;AAAA,SAyCnBC,SAzCmB,GAyCP,MAAM;AAChB,YAAMC,WAAW,GAAG,KAAKH,KAAL,CAAWI,KAAX,CAAiBC,IAAjB,EAApB;AACA,UAAIC,aAAa,GAAG,EAApB;;AACA,WAAI,IAAIC,CAAR,IAAaJ,WAAb,EAAyB;AACvB,YAAGA,WAAW,CAACK,MAAZ,CAAmBD,CAAnB,MAA0B,GAA7B,EAAiC;AAC/BD,UAAAA,aAAa,GAAE,CAAE,MAAjB;AACD,SAFD,MAEO;AACLA,UAAAA,aAAa,GAAE,CAAEC,CAAjB;AACD;AACF;;AACD,aAAOD,aAAP;AACD,KApDkB;;AAGjB,SAAKN,KAAL,GAAa;AACXS,MAAAA,QAAQ,EAAE,EADC;AAEXC,MAAAA,SAAS,EAAE,EAFA;AAGXT,MAAAA,SAAS,EAAE,IAHA;AAIXG,MAAAA,KAAK,EAAC,EAJK;AAKXO,MAAAA,kBAAkB,EAAE,EALT;AAMXC,MAAAA,WAAW,EAAC;AAND,KAAb;AAQD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,OAAO,GAAG,EAAhB;AACAnB,IAAAA,KAAK,CAACoB,GAAN,CAAU,iCAAiC,KAAKjB,KAAL,CAAWkB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAnE,EACCC,IADD,CACMC,QAAQ,IAAI;AAChB,WAAKC,QAAL,CAAc;AACZX,QAAAA,SAAS,EAAEU,QAAQ,CAACE,IAAT,CAAcZ,SADb;AAEZD,QAAAA,QAAQ,EAAEW,QAAQ,CAACE,IAAT,CAAcb;AAFZ,OAAd;AAIAd,MAAAA,KAAK,CAACoB,GAAN,CAAU,iCAAiC,KAAKf,KAAL,CAAWU,SAAtD,EACGS,IADH,CACQC,QAAQ,IAAI;AAChBA,QAAAA,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkBC,IAAI,IACpBV,OAAO,CAACW,IAAR,CAAaC,IAAI,CAACC,KAAL,CAAYH,IAAI,CAACI,MAAL,GAAc,GAA1B,IAAkC,GAA/C,CADF;AAEF,aAAKP,QAAL,CAAc;AAACjB,UAAAA,KAAK,EAAEU;AAAR,SAAd;AAAgC,OAJlC,EAKCe,KALD,CAKOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CALd;AAKgC,KAXlC,EAaCD,KAbD,CAaOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAbd;AAcD;;AA2BDG,EAAAA,MAAM,GAAG;AAEP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKjC,KAAL,CAAWS,QAAhB,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACS,KAAKT,KAAL,CAAWI,KAAX,CAAiBC,IAAjB,EADT,CAFF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACO,KAAKL,KAAL,CAAWS,QADlB,yBAC+C,KAAKV,MAAL,EAD/C,CALF,CADF;AAYD;;AAvEgC;;AA0EnC,eAAeH,UAAf","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\nclass QuayStatus extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      quayname: '',\n      stationId: '',\n      safeToday: true,\n      tides:[],\n      stationCoordinates: '',\n      stationName:'',\n    }\n  }\n\n  componentDidMount() {\n    const heights = [];\n    axios.get('http://localhost:5000/quays/' + this.props.match.params.id)\n    .then(response => {\n      this.setState({\n        stationId: response.data.stationId,\n        quayname: response.data.quayname,\n      });\n      axios.get('http://localhost:5000/tides/' + this.state.stationId)\n        .then(response => {\n          response.data.map(tide => \n            heights.push(Math.round((tide.Height * 100)) / 100))\n        this.setState({tides: heights})})\n      .catch(err => console.log(err))}\n      )\n    .catch(err => console.log(err))\n  }\n  \n  \n\n  status = () => {\n    if(this.state.safeToday) {\n      return \"SAFE\"\n    } else {\n      return \"IN DANGER!\"\n    }\n  }\n\n  prepTides = () => {\n    const stringTides = this.state.tides.join();\n    let preparedTides = '';\n    for(let c in stringTides){\n      if(stringTides.charAt(c) === ','){\n        preparedTides =+ ' _, ';\n      } else {\n        preparedTides =+ c;\n      }\n    }\n    return preparedTides;\n  }\n\n\n\n  render() {\n\n    return(\n      <div>\n        <h3>{this.state.quayname}</h3>\n        <p>\n          Tides {this.state.tides.join()}\n        </p>\n        <p>\n          The {this.state.quayname} quay is currently {this.status()}\n        </p>\n      </div>\n\n    );\n  }\n}\n\nexport default QuayStatus;"]},"metadata":{},"sourceType":"module"}